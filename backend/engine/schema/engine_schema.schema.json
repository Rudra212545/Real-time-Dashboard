{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "BHIV Engine Schema v1.0 - FROZEN",
  "type": "object",
  "required": ["schema_version", "world", "scene", "entities"],
  "additionalProperties": false,

  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0"
    },

    "world": {
      "type": "object",
      "required": ["id", "name", "gravity"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^world_[a-z0-9_]+$"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 64
        },
        "gravity": {
          "type": "array",
          "items": { "type": "number" },
          "minItems": 3,
          "maxItems": 3
        }
      }
    },

    "scene": {
      "type": "object",
      "required": ["id", "ambientLight", "skybox"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^scene_[a-z0-9_]+$"
        },
        "ambientLight": {
          "type": "array",
          "items": { "type": "number", "minimum": 0, "maximum": 1 },
          "minItems": 3,
          "maxItems": 3
        },
        "skybox": {
          "type": "string",
          "minLength": 1
        }
      }
    },

    "entities": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "type", "transform", "material", "components"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9_]+$"
          },
          "type": {
            "type": "string",
            "enum": ["player", "npc", "object"]
          },

          "transform": {
            "type": "object",
            "required": ["position", "rotation", "scale"],
            "additionalProperties": false,
            "properties": {
              "position": {
                "type": "array",
                "items": { "type": "number" },
                "minItems": 3,
                "maxItems": 3
              },
              "rotation": {
                "type": "array",
                "items": { "type": "number" },
                "minItems": 3,
                "maxItems": 3
              },
              "scale": {
                "type": "array",
                "items": { "type": "number", "exclusiveMinimum": 0 },
                "minItems": 3,
                "maxItems": 3
              }
            }
          },

          "material": {
            "type": "object",
            "required": ["shader", "texture", "color"],
            "additionalProperties": false,
            "properties": {
              "shader": {
                "type": "string",
                "minLength": 1
              },
              "texture": {
                "type": "string",
                "minLength": 1
              },
              "color": {
                "type": "array",
                "items": { "type": "number", "minimum": 0, "maximum": 1 },
                "minItems": 3,
                "maxItems": 3
              }
            }
          },

          "components": {
            "type": "object",
            "required": ["mesh", "collider"],
            "additionalProperties": false,
            "properties": {
              "mesh": {
                "type": "string",
                "minLength": 1
              },
              "collider": {
                "type": "string",
                "enum": ["box", "sphere", "none"]
              },
              "script": {
                "type": "string",
                "default": ""
              }
            }
          }
        }
      }
    },

    "quests": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "triggerEntity", "goal"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^quest_[a-z0-9_]+$"
          },
          "triggerEntity": {
            "type": "string"
          },
          "goal": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    }
  }
}
  